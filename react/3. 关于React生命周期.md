# React生命周期

> 生命周期是组件在挂载到真实dom上和更新数据时以及卸载时的一些钩子函数,可以在这些钩子函数中做一些正确的事情
> 生命周期是针对类组件而言的
> Hook是针对函数组件而言的,hook让函数组件也拥有生命周期钩子函数

## React16.0.0前的生命周期

1. constructor

- 该函数为Es2015推出的`class`自有函数
- 同执行class同
- 不能使用setState

2. componentWillMount

- 正常情况下只会执行一次(此钩子函数可能会执行多次SSR,新版生命周期已移除)
- 可以使用setState,注意多次调用产生的问题

3. render

- 该函数返回一个虚拟DOM
- 只要需要更新视图它都会被执行
- 不能使用setState,栈溢出

4. componentDidMount

- 当虚拟DOM渲染至真实页面后,执行一次只执行一次
- 随意使用setState,可以执行一些副作用操作

**以上为挂载阶段**

> 经过挂载阶段后,组件进入活跃状态

**属性更改【专用】**

componentWillReceiveProps

- 更改属性前执行
- 参数为新的属性对象
- 该钩子函数容易产生问题(后期已移除)

**属性和状态**

1. shouldComponentUpdate

- 返回true和false决定是否执行更新页面(render和后面的一系列钩子函数)
- 默认返回true
- 参数: props:更改后的属性  state:更改后的状态

2. componentWillUpdate

- 即将更新时执行(新版已移除)
- 参数: props:更改后的属性  state:更改后的状态

3. render
   
- 该函数返回一个虚拟DOM
- 只要需要更新视图它都会被执行
- 不能使用setState,栈溢出

4. componentDidUpdate

- 更新完成
- 参数: props:更改前的属性  state:更改前的状态

**最后: 卸载**

1. componentWillUnmount 

- 卸载前执行
- 可用于清除副作用操作

## 新版生命周期

> 在新版生命周期中移除了
> 
