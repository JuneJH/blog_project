# CSS

> Cascading Style Sheets用来描述HTML文档的呈现

## 基础

### 1. 声明块

```css

  div{
    color:red
  }

```

1. 大括号前面的是选择器
2. 大括号中的内容是声明
3. 声明块中包含很多声明（属性`color`），每一个声明（属性`red`）表达了某一方面的样式

### 2. CSS代码书写的位置

1. 内部样式表
    
  > 书写到style的元素中，一般放置在head中，能够先加载。

2. 内联样式表，元素样式表
  
  > 书写标签上,标签上的style属性

3. 外部样式表
  
  > 将样式书写到独立的css文件中 link元素
    1. 外部样式表可以解决多页面重复样式(css样式表如果代码少，可以使用，能够提高加载效率)
    2. 有利于浏览器缓存，提高页面加载速度
    3. 有利于代码分离，更容易阅读，维护，修改

### 3. 常见样式声明

1. ***color***

> 字体颜色
   
- **预设值** 定义好的单词
- **三原色，色值** ：光学三原色（红，绿，蓝），每个颜色可以使用0~255之间的数字来表示，色值
- rgb()/rgba()多的一个值表示透明通道
- hex(16进制)表示法：#红绿蓝
  1. 淘宝红：#f40
  2. 黑色：#000

2. ***font-size***

> 元素内部文字的尺寸大小

 - px：象素
 - em：相对单位，相对于父元素的字体大小
 - 每个元素必须有字体大小，如果没有声明，则直接使用父元素大小。父元素如果也没有，就采用基准大小（可以在浏览器上设置）

3. ***font-weight***

> 需要字体匹配，字体可能不支持多种加粗,可能只会出现2种效果，加粗与不加粗  

4. ***font-family***

> 使用多个字体，以匹配多个环境

  - sans-serif,非衬线字体（宋体等，字体边框有修饰，适合打印出来的，网页适合圆润一点的显示好看）

5. ***font-style***

> 字体样式，可以用来设置斜体

 - i元素是一个倾斜（默认样式）通常用它表示图标
 - strong(表示重要的，不能忽略的内容),em（表示强调内容）

6. ***text-decoration***
   
> 给文字加线

 - del：错误的内容
 - s: 过期的元素

7. ***text-indent***

> 首行缩进：2em

8. ***text-align***

> 文字对齐方式

- left 左对齐
- right 右对齐
- center 居中
- justify 除最后一行外，分散对齐

9. ***line-height***

> 每行文本的高度，该值越大每行距离就越大

 - 设置行高为容器高度，可以让当行文本居中
 - 行高可以设置纯数字，表示相对于当前元素文字大小

10. ***width***

> 设置宽度   

11. ***height***

> 设置高度

12. ***letter-sapce***

> 文字间隙

13. ***vertical-align***

> 决定参考线：font-size，font-family，line-height
> 一个元素如果子元素出现行盒，该元素内部也会产生参考线

- baseline：该元素的基线与父元素的基线对齐
- super：该元素的基线与父元素的上基线对齐
- sub： 该元素的基线与父元素的上基线对齐
- text-top：该元素的virtual-area的顶边，对齐父元素的text-top；
- text-bottom：该元素的virtual-area的底边对齐父元素的text-bottom
- top:该元素的virtual-area的顶边，对齐line-box的顶边
- bottom： 该元素的virtual-area的底边，对齐line-box的底边
- middle ：该元素的中线（content-area的一半），与父元素的x字母高度一半的位置对齐
- 行盒组合起来，可以形成多行，每一行的区域叫做line-box。line-box的顶边是该行内所有行盒最高顶边，底边是该行行盒的最底边
- 实际，一个元素的实际占用高度（高度自动），高度的计算通过line-box计算
- 行盒：inline-box
- 数值：相对于基线的偏移量，向上为正数，向下为负数
- 百分比：相对于基线的偏移量，相对于自身virtual-area的高度
- line-box是承载内容的必要条件，以下情况不生成line-box
- 某元素内部没有任何行盒
- 某元素的字体大小为0

14. ***background***

- background-image
- background-repeat
- 默认情况下，背景图会在横坐标和从坐标重复
- background-size（控制背景图的尺寸）
- 预设值：contain cover  类似于objext-fit
- 数值或百分比
- background-position
- 预设值 left top bottom right center
- 数值或百分比
- 雪碧图（精灵图）(spirit)
- background-attachment
- fixed（背景图相对于视口不动）
- 通常用它控制背景图是否固定
- 速写（简写）background
- url() no-repeat 先写位置  再写尺寸 fixed #000

15. ***透明度***

- opacity，它设置的是整个元素的透明，它的取值是0~1
- 在颜色位置设置alpha通道（rgba）

16. ***鼠标样式***

> cursor

17. ***盒子隐藏***

- display: none; 不生成盒子
- visibility:hidden;生成盒子，只是从视觉上看不到（QQ闪烁）盒子仍然占据空间

18. ***@规则***

> at-rule: @规则 @语句 CSS语句 CSS指令


- @import "路径" 引用其他css文件
-  charset
- @charset "utf-8";
- 告诉浏览器该css文件，使用的字符编码为utf-8。必须写在第一行
  
19.  ***web字体***

> 解决用户电脑没有安装的字体，强制让用户下载该字体

制作一个新字体
```css

  @font-face{
      font-family:"good night";
      src:url("./CSS-Advanced.ttf")
  }

```

20. ***display: list-item***

> 设置为该属性值的盒子，本质上仍然是一个块盒，但同时该盒子会附带另一个盒子为次盒子
> 元素本身生成的盒子叫做主盒子，附带的盒子称为次盒子，次盒子和主盒子水平排列

- list-style-type:设置次盒子中内容的类型
- list-style-position:设置次盒子相对于主盒子的位置
- list-style
- list-style:none   清空次盒子

***direction & writing-mode***

> direction 设置的是开始到结束的方向
> writing-mode 设置文字书写的方向

### 4. 继承

> 子元素会继承父元素的某些CSS属性
> 通常，跟文字内容相关的属性都能被继承

1. 属性值的计算过程

- 一个元素一个元素依次渲染，顺序按照页面文档的树形结构进行

- 渲染每个元素的前提条件： 该元素的所有CSS属性必须有值

- 一个元素，从所有属性都没有值，到所有的属性都有值，这个计算过程，叫做属性值计算过程
  
***计算过程***

1. 确定声明值(参考样式表（作者样式表和浏览器样式表）中没有冲突的声明，作为CSS的属性值) 
2. 层叠冲突(对样式表有冲突的什么使用层叠规则，确定CSS属性值（比较重要性，比较特殊性，比较源次序）)
3. 使用继承（对仍然没有值的属性，若可以继承，则继承父元素的值）
4. 使用默认值（对仍然没有值的属性，使用默认值）

- inherit ： 手动（强制）继承，将父元素的值取出应用到该元素
- initial： 初始值，将该属性设置为默认值，如果你不知道默认值就可以填这个值

### 5. 常规流

> 盒模型：规定单个盒子的规则
> 视觉格式化模型（布局规则）：页面中的多个盒子排列规则
> 视觉格式化模型，大体上将页面中盒子的排列分为三种方式：

1. 常规流
2. 浮动
3. 定位

#### 1. 常规流布局

- 常规流，文档流，普通文档流，常规文档流
- 所有元素，默认情况下，都属于常规流布局
- 总体规则：块盒独占一行，行盒水平依次排列
- 包含块（containing block）：每个盒子都有它的包含块，包含块决定了盒子的排列区域
- 绝大部分情况下：盒子的包含块，为其父元素的内容盒  

##### 1. 块盒

- 每个块盒的总宽度，必须刚好等于包含块的宽度
- 宽度的默认值为auto ——> 将剩余空间吸收掉
- margin的取值也可以是auto ——> 将剩余空间吸收掉
- 宽度的吸收能力强于margin
- 若宽度，边框，内边距，外边距计算后，仍有剩余空间，该剩余空间被margin-right吸收
- 在常规流中，块盒在其包含块中居中，可以定宽，然后左右margin设置为auto

1. 每个块盒垂直方向上的auto值
   
> height：auto，表示适应内容的高度
> margin：auto，表示0

2. 百分比取值
   
> padding，宽，margin可以取值百分比
> 所有百分比相对于包含块的**宽度**。
> 都是相对于宽度，与高度无关

3. 高度的百分比
   
> 包含块的高度是否取决于子元素，设置百分比无效
> 包含块的高度与子元素无关，百分比相对于父元素高度

4. 上下外边距的合并

> 两个常规流块盒，上下外边距相邻，会进行合并
> 两个外边距合并取最大值（父子嵌套margin塌陷）

#### 2. 浮动

- 文字环绕
- 横向排列（导航栏等，兼容性好）
 
1. 浮动的基本特点

***float***

- left： 左浮动，元素靠上靠左
- right： 有浮动，元素靠上靠右
- 默认值为none
- 当一个元素浮动后，一定是块盒（浮动会强制将其变化为块盒，更改display属性为block）
- 浮动元素的包含块，和常规流一样，为父元素的内容盒

***盒子尺寸***

- 宽度为auto时，适应内容宽度
- 高度为auto时，与常规流一致，适应内容的高度
- margin为auto，为0
- 边框，内边距，百分比设置与常规流一样

***盒子排列***

- 左浮动的盒子靠上靠左排列
- 右浮动的盒子靠上靠右排列
- 浮动盒子再包含盒块中排列避开常规流盒子
- 常规流盒子在排列的时候，无视浮动盒子（如果顺序再后面，则会被覆盖）
- 行盒再排列时，会避开浮动盒子
- 外边距合并不会发生

> 如果文字没有行盒中，浏览器会自动生成一个行盒包裹文字，该行盒为匿名行盒

***高度坍塌***

> 高度坍塌的根源：常规流盒子的自动高度，在计算时，会忽略浮动盒子

解决：清除浮动，涉及css属性：clear
- 默认值：none
- left：清除左浮动，该元素必须出现在前面所有左浮动盒子的下方
- right：清除浮动，该元素必须出现在前面所有右浮动盒子的下方
- both： 清除左右浮动，该元素必须出现在前面所有浮动盒子的下方
**谁高度坍塌就清除谁，伪元素三件套**

***浮动详细规则***

- 左浮动的盒子向上向左排列
- 右浮动的盒子向上向右排列
- 浮动盒子的顶边不得高于上一个盒子的顶边（上一个盒子）
- 若剩余空间无法放下浮动的盒子，则该盒子向下移动，直到具备足够的空间能容纳盒子，然后向左或向右移动
#### 3.定位

> 定位:手动控制元素在包含块中的精准位置

***position***

- 默认值: static 静态定位（不定位）
- relative: 相对定位
- absolute: 绝对定位
- fixed: 固定定位
- 一个元素，只要position的取值不是static，认为该元素是一个定位元素
- 定位元素会脱离文档流（相对定位除外）

***文档流***

- 文档流中的元素摆放时，会忽略脱离了文档流的元素
- 文档流中元素计算自动高度时，会忽略脱离了文档流的元素

***相对定位***

> 不会导致元素脱离文档流，只是让元素在原来位置上进行偏移，

***四个属性值***

- left
- right
- top
- bottom

**盒子的偏移不会影响其他盒子的位置**

***绝对定位***

- 宽高auto 适应内容
- 包含块变化：找祖先元素中第一个定位元素，该元素的填充盒为其包含块，若找不到，则它的包含块为整个网页（初始化包含块，html整个网页）

***固定定位***

- 其他情况和绝对定位完全一样。
- 包含块不同： 固定为视口（浏览器的可视窗口，看得见的）

***定位下的居中***

- 定宽（高）
- 将左右（上下）距离设置为0
- 将左右（上下）margin设置为auto
- 绝对定位和固定定位中，margin为auto时，会自动吸收剩余空间

***多个定位元素重叠时***

> 堆叠上下文

- 设置z-index，通常情况下，该值越大越靠近用户
- 只有定位元素设置z-index有效
- z-index可以为负数，常规流元素，浮动元素会覆盖它。
- 绝对定位，固定定位元素一定是块盒（相对定位不会改变）
- 绝对定位，固定定位元素一定不是浮动（把浮动强制设置为none）
- 没有外边距合并

### 6. 图片的底部白边

> 图片的父元素是一个块盒，块盒高度自动，图片底部和父元素往往会出现空白

1. 设置父元素的字体大小为0
2. 将图片设置为块盒

### 7. 字体参考线

> 文字是通过一些文字制作软件制作:fontforge
> 制作文字时，会有几根参考线，不同的文字类型，参考线不一样，同一种文字类型参考线是一样的

***font-size***

- 字体大小，设置的是文字的相对大小
- 文字的相对大小: 1000 1024 2048
- 文字顶线到底线的距离，是文字的实际大小（content-area，内容区）
- 行盒的背景覆盖content-area

***行高***

- 顶线向上延申的空间，和底线向下延申的空间，两个空间相等，该空间叫做gap（空隙）gap默认情况下，字体设- 计者决定的
- top到bottom，叫做virtual-area（虚拟区）
- 行高，就是虚拟区，虚拟区可能小于content-area，就会发生字体重叠。将line-height设置为1就是- content-area的大小，如果它的相对大小大于了它，文字将会重叠
- line-height： normal。默认值，使用文字默认gap

***其他元素的基线***

- 图片：基线位置位于图片的下外边距
- 表单元素：基线位置在内容底边
- 行块盒：

  1. 方块盒最后一行由line-box，用最后一行的基线作为整个基线
  2. 如果行块盒内部最后一行没有行盒。则使用下外边距作为基线。

### 8. stack context

> stack context:它是一块区域，这块区域由某个元素创建，它规定了该区域中的内容在Z抽上的排列的先后顺序

***创建堆叠上下文的元素***

- html元素（根元素）
- 设置了z-index数值(非auto)的定位元素


***同一个堆叠上下文中元素在Z轴上的排列***

从后到前的排列顺序

1. 创建堆叠上下文的元素的背景和边框（同一个堆叠上下文，这个都在最后背景和边框）
2. 堆叠级别（z-index，stack level ）为负值的堆叠上下文
3. 常规流非定位的块盒
4. 非定位的浮动盒子
5. 常规流非定位行盒
6. 任何z-index是auto的定位子元素，以及z-index是0 的堆叠上下文
7. 堆叠级别为正值的堆叠上下文

如果规则一致，书写顺序
以上都在一个堆叠上下文

每个堆叠上下文，独立于其他堆叠上下文，它们之间不能相互穿插

### 9. 最后-渐进增强 & 优雅降级

两种解决兼容性问题的思路，会影响代码的书写风格
- 渐进增强: 先适应大部分浏览器，然后针对新版本浏览器加入新的样式

书写代码时，先尽量避免书写有兼容性问题的代码，完成之后再逐步加入新标准的代码。

- 优雅降级: 先制作完整的功能，然后针对低版本浏览器进行特殊处理

书写代码时，先不用特别在意兼容性，完成整个功能之后，再针对低版本浏览器处理样式