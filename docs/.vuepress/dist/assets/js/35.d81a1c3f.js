(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{421:function(t,s,a){"use strict";a.r(s);var e=a(54),o=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"关于cookie还有session还有jwt"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于cookie还有session还有jwt"}},[t._v("#")]),t._v(" 关于cookie还有session还有jwt")]),t._v(" "),a("h2",{attrs:{id:"_1-关于cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-关于cookie"}},[t._v("#")]),t._v(" 1. 关于cookie")]),t._v(" "),a("blockquote",[a("p",[t._v("浏览器与服务器交流，在绝大部分时候我们都选择使用"),a("code",[t._v("HTTP")]),t._v("协议\n"),a("code",[t._v("HTTP")]),t._v("协议是无状态的，致使服务端无法分清它是谁，我该不该信任它\n于是我们就需要一个卡包来保存我们的身份信息，不需要太大，钱包大小即可，以此方便服务器在茫茫请求中，准确的找到正确的它\n一个扬名世界皮包名牌映入眼帘-"),a("code",[t._v("cookie")]),t._v(",当然我们可以揣兜儿\n但是"),a("code",[t._v("cookie")]),t._v("不仅仅是一个卡包，它拥有的是服务-浏览器自动管理，无需你亲手来掏证证明你是你\n它还有"),a("em",[t._v("大")]),t._v("容量-4k左右")])]),t._v(" "),a("h3",{attrs:{id:"_1-cookie是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-cookie是什么"}},[t._v("#")]),t._v(" 1. cookie是什么")]),t._v(" "),a("blockquote",[a("p",[t._v("cookie是浏览器用来存储一些网站的身份信息或者其他一些有用的信息\n每个不同的域都有自己的一个专属cookie\n一般情况下cookie都会跟随请求一同发送至服务端\ncookie只有4k左右，只能存储一小部分内容\n客户端\n"),a("code",[t._v("Cookie")]),t._v("通过响应头中的"),a("code",[t._v("Set-Cookie")])])]),t._v(" "),a("h4",{attrs:{id:"_1-cookie如何存储"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-cookie如何存储"}},[t._v("#")]),t._v(" 1. cookie如何存储")]),t._v(" "),a("ol",[a("li",[t._v("先看看")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 后端代码设置响应头")]),t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"token"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                domain"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"127.0.0.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                maxAge"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 响应头单独截取")]),t._v("\n    Set"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Cookie"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" token"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("a391b44e1e2f4176b87f52395ed35c96"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" Max"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Age"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("86400")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" Domain"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" Path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" Expires"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("Fri"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v(" Nov "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("07")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("46")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GMT")]),t._v("\n")])])]),a("ul",[a("li",[t._v("它保存的是键("),a("code",[t._v("key")]),t._v(")值("),a("code",[t._v("vaule")]),t._v(")对并且通过一些属性对其进行控制\n"),a("blockquote",[a("ol",[a("li",[t._v("domain:域，表示该cookie属于那个域")]),t._v(" "),a("li",[t._v("path:表示该cookie属于那个路径")]),t._v(" "),a("li",[t._v("secure: 是否使用安全传输")]),t._v(" "),a("li",[t._v("expire:过期时间")]),t._v(" "),a("li",[t._v("max-age:单位秒")])])])])]),t._v(" "),a("h4",{attrs:{id:"_2-客户端如何操作cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-客户端如何操作cookie"}},[t._v("#")]),t._v(" 2. 客户端如何操作cookie")]),t._v(" "),a("ol",[a("li",[t._v("客户端使用"),a("code",[t._v("document.cookie")]),t._v("来操作cookie")]),t._v(" "),a("li",[t._v("设置"),a("code",[t._v("cookie")]),t._v(",一次只能设置一个"),a("code",[t._v("cookie")]),t._v("它满足键值对，其中后续可跟限制其属性的关键变量并以"),a("code",[t._v(";")]),t._v("分割")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("    document"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cookie "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"myCookie=123;max-age=1000"')]),t._v("\n")])])]),a("h4",{attrs:{id:"_3-服务端怎么设置cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-服务端怎么设置cookie"}},[t._v("#")]),t._v(" 3. 服务端怎么设置cookie")]),t._v(" "),a("ol",[a("li",[t._v("在"),a("code",[t._v("express")]),t._v("框架中通过"),a("code",[t._v("res.cookie(key,value,option)")]),t._v("方法来设置")]),t._v(" "),a("li",[t._v("也可通过设置响应头"),a("code",[t._v("set-cookie")]),t._v("来设置")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cookie")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"token"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                domain"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"127.0.0.1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                maxAge"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("header")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"set-cookie"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"my=234"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),a("h2",{attrs:{id:"_2-关于session"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-关于session"}},[t._v("#")]),t._v(" 2. 关于session")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("session")]),t._v("是一个会话状态\n当客户端第一次访问服务器时，服务器会为其生成一个唯一ID(eg:uuid)\n并且把这个"),a("code",[t._v("id")]),t._v("传回给客户端，可以放在"),a("code",[t._v("cookie")]),t._v("中，也可以跟随url(这只是实现上的问题)\n客户端再次发送请求(比如登录)，并且带上服务器刚刚颁发的"),a("code",[t._v("id")]),t._v("\n服务器收到客户端的"),a("code",[t._v("id")]),t._v(",并在自我维护的session列表中找到该用户\n服务器做一些处理(比如登录成功),可以将结果保存在该"),a("code",[t._v("Id")]),t._v("下，以便后续操作")])]),t._v(" "),a("h2",{attrs:{id:"_3-关于jwt-json-web-tokens。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-关于jwt-json-web-tokens。"}},[t._v("#")]),t._v(" 3. 关于jwt   --JSON Web Tokens。")]),t._v(" "),a("blockquote",[a("p",[t._v("随着越来越多的终端设备，这些设备对"),a("code",[t._v("cookie")]),t._v("的支持远不如浏览器甚至没有\n"),a("code",[t._v("session")]),t._v("随着用户的增多也出现难以管理的现象\nJWT是一种标准，具有简约、自包含等特点"),a("a",{attrs:{href:"http://jwtio.online/introduction.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("----来自官网"),a("OutboundLink")],1),t._v("\n拥有特定的数字签名，因此在传输中的通信信息是能保证被信任的\n使用场景: 1 .认证鉴权  2. 数据交换")])]),t._v(" "),a("h3",{attrs:{id:"_1-jwt的结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-jwt的结构"}},[t._v("#")]),t._v(" 1. jwt的结构")]),t._v(" "),a("p",[t._v("一般来说长这个样儿"),a("code",[t._v("xxxxx.yyyyy.zzzzz")])]),t._v(" "),a("blockquote",[a("p",[t._v("头部 Header")]),t._v(" "),a("blockquote",[a("p",[t._v("头部 "),a("code",[t._v('{"alg": "HS256","typ": "JWT"}')])])])]),t._v(" "),a("blockquote",[a("p",[t._v("负载 Payload")]),t._v(" "),a("blockquote",[a("p",[t._v("负载 "),a("code",[t._v('{ "ss"："发行者",\t"iat"："发布时间",\t"exp"："到期时间",\t"sub"："主题",\taud"："听众",\t"nbf"："在此之前不可用", "jti"："JWT ID"}')])])])]),t._v(" "),a("blockquote",[a("p",[t._v("签名 Signature")])]),t._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("blockquote",[a("p",[t._v("start")]),t._v(" "),a("h3",{attrs:{id:"cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[t._v("#")]),t._v(" cookie")]),t._v(" "),a("blockquote",[a("p",[t._v("作为真实的存储位置,存储在客户端，不占用服务器资源")]),t._v(" "),a("blockquote",[a("p",[t._v("session产生的ID可以保存在其中\nJWT也可以保存在其中\n同时也具有以下一些缺点\n存储的为字符串\n存储空间小\n数据容易获取(只要没有设置"),a("code",[t._v("httponly")]),t._v(","),a("code",[t._v("javascript")]),t._v("就能获取，更不要提一些攻击手段)\n容易被篡改\n容易丢失")])])]),t._v(" "),a("h3",{attrs:{id:"session"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#session"}},[t._v("#")]),t._v(" session")]),t._v(" "),a("blockquote",[a("p",[t._v("它的优点即是"),a("code",[t._v("cookie")]),t._v("的缺点")]),t._v(" "),a("blockquote",[a("p",[t._v("它可以是任意格式\n存储空间无所谓(只要服务器强大)\n数据基本获取不到，毕竟在服务端\n数据更不能更改了")])])]),t._v(" "),a("h3",{attrs:{id:"jwt"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jwt"}},[t._v("#")]),t._v(" jwt")]),t._v(" "),a("blockquote",[a("p",[t._v("只是一种规范")]),t._v(" "),a("blockquote",[a("p",[t._v("将想保存的信息放入"),a("code",[t._v("payload")]),t._v("即可\n不受终端限制，无论是放在"),a("code",[t._v("cookie")]),t._v("中,还是"),a("code",[t._v("localstorage")]),t._v(",还是响应头中\n因为有签名存在\n基本难以更改和伪造")])])]),t._v(" "),a("h3",{attrs:{id:"cookie更像一种载体-它的实现取决于浏览器-session和jwt更像是一种概念-怎么实现取决于开发者-权衡利弊完全在开发者手中"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie更像一种载体-它的实现取决于浏览器-session和jwt更像是一种概念-怎么实现取决于开发者-权衡利弊完全在开发者手中"}},[t._v("#")]),t._v(" cookie更像一种载体，它的实现取决于浏览器，session和jwt更像是一种概念，怎么实现取决于开发者，权衡利弊完全在开发者手中")]),t._v(" "),a("p",[t._v("end")])])])}),[],!1,null,null,null);s.default=o.exports}}]);